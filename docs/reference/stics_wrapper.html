<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Running usm(s) from txt input files stored in one directory
per <code>situation</code>, simulated results are returned in a list — stics_wrapper • SticsOnR</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Running usm(s) from txt input files stored in one directory
per <code>situation</code>, simulated results are returned in a list — stics_wrapper" />
<meta property="og:description" content="This function uses Stics directly through a system call, can
force Stics input parameters with values given in arguments." />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SticsOnR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Changing_java_version_linux.html">Changing Java version procedure under linux</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SticsRPacks/SticsOnR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Running usm(s) from txt input files stored in one directory
per <code>situation</code>, simulated results are returned in a list</h1>
    <small class="dont-index">Source: <a href='https://github.com/SticsRPacks/SticsOnR/blob/master/R/stics_wrapper.R'><code>R/stics_wrapper.R</code></a></small>
    <div class="hidden name"><code>stics_wrapper.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function uses Stics directly through a system call, can
force Stics input parameters with values given in arguments.</p>
    </div>

    <pre class="usage"><span class='fu'>stics_wrapper</span>(<span class='no'>model_options</span>, <span class='kw'>param_values</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sit_var_dates_mask</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model_options</th>
      <td><p>List containing any information needed by the model.
In the case of Stics: <code>stics_path</code> the path of Stics executable file and
<code>data_dir</code> the path of the directory containing the Stics input data
for each USM (one folder per USM where Stics input files are stored in txt
format)</p></td>
    </tr>
    <tr>
      <th>param_values</th>
      <td><p>(optional) either a named vector or a named 3D array.
Use a named vector that contains the values and names of the parameters
to force the same values of the parameters whatever the simulated
situations (usms). If one wants to force the model with different values
of parameters for the simulated situations or to simulate the situations
several times but with different values of the parameters, use a 3D array
containing the value(s) and names of the parameters to force for each
situation to simulate. This array contains the different parameters
values (first dimension) for the different parameters (second dimension)
and for the different situations (third dimension).
See examples for more details.</p></td>
    </tr>
    <tr>
      <th>sit_var_dates_mask</th>
      <td><p>(optional) List of situations:
may be either a character vector of situation names or a named list
containing information about variables and dates for which simulated values
should be returned. Typically a list containing the observations to which
simulations should be compared as provided by SticsRFiles::read_obs</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing simulated values (<code>sim_list</code>: a vector of list (one
element per values of parameters) containing usms outputs data.frames) and an
error code (<code>error</code>) indicating if at least one simulation ended with an
error. Inter-crops are not yet taken into account for extracting output
data from files.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {

<span class='co'># Specifying the JavaStics folder</span>
<span class='no'>javastics_path</span> <span class='kw'>&lt;-</span> <span class='st'>"/path/to/javastics"</span>

<span class='co'># Setting the model executable path (windows, linux)</span>
<span class='no'>stics_path</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='no'>javastics_path</span>, <span class='st'>"bin"</span>,<span class='st'>"stics_modulo"</span>)

<span class='co'># Setting the input data folder path, root directory of the usms directories</span>
<span class='no'>data_path</span> <span class='kw'>&lt;-</span> <span class='st'>"/path/to/usms/subdirs/root"</span>

<span class='co'># Setting the mandatory simulations options</span>
<span class='no'>sim_options</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stics_wrapper_options.html'>stics_wrapper_options</a></span>(<span class='kw'>stics_path</span> <span class='kw'>=</span> <span class='no'>stics_path</span>,
<span class='kw'>data_dir</span> <span class='kw'>=</span> <span class='no'>data_path</span>)

<span class='co'># Running all the usms that have a corresponding input folder in data_path</span>
<span class='no'>results</span> <span class='kw'>&lt;-</span> <span class='fu'>stics_wrapper</span>(<span class='no'>sim_options</span>)

<span class='co'># Running a sublist of usm</span>
<span class='no'>usms_list</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"wheat"</span>, <span class='st'>"pea"</span>, <span class='st'>"maize"</span>)
<span class='no'>results</span> <span class='kw'>&lt;-</span> <span class='fu'>stics_wrapper</span>(<span class='no'>sim_options</span>, <span class='kw'>sit_var_dates_mask</span> <span class='kw'>=</span> <span class='no'>usms_list</span>)

<span class='co'># Applying a single parameter values vector for the sublist of usms</span>
<span class='no'>param_values</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.002</span>,<span class='fl'>50</span>)
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>param_values</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"dlaimax"</span>, <span class='st'>"durvieF"</span>)
<span class='no'>results</span> <span class='kw'>&lt;-</span> <span class='fu'>stics_wrapper</span>(<span class='kw'>model_options</span> <span class='kw'>=</span> <span class='no'>sim_options</span>,
<span class='kw'>sit_var_dates_mask</span> <span class='kw'>=</span> <span class='no'>usms_list</span>, <span class='kw'>param_values</span> <span class='kw'>=</span> <span class='no'>param_values</span>)

<span class='co'># Applying different values of the parameters for the usms</span>
<span class='co'># Let's run usm wheat with</span>
<span class='co'># c(dlaimax=0.001, durvieF=50) and c(dlaimax=0.002, durvieF=50),</span>
<span class='co'># usm pea with c(dlaimax=0.001, durvieF=60) and c(dlaimax=0.002, durvieF=60),</span>
<span class='co'># and usm maize with c(dlaimax=0.001, durvieF=70)</span>
<span class='co'># and c(dlaimax=0.002, durvieF=70)</span>
<span class='no'>param_values</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span>( <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.001</span>, <span class='fl'>0.002</span>, <span class='fl'>50</span>, <span class='fl'>50</span>,
                         <span class='fl'>0.001</span>, <span class='fl'>0.002</span>, <span class='fl'>60</span>, <span class='fl'>60</span>,
                         <span class='fl'>0.001</span>, <span class='fl'>0.002</span>, <span class='fl'>70</span>, <span class='fl'>70</span>),
                       <span class='kw'>dim</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>,<span class='fl'>2</span>,<span class='fl'>3</span>),
                       <span class='kw'>dimnames</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>NULL</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"dlaimax"</span>, <span class='st'>"durvieF"</span>),
                       <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"wheat"</span>, <span class='st'>"pea"</span>, <span class='st'>"maize"</span>)))
<span class='co'># In this case, no need to redefine the usms list in sit_var_dates_mask</span>
<span class='co'># argument, it is already given in param_values</span>
<span class='no'>results</span> <span class='kw'>&lt;-</span> <span class='fu'>stics_wrapper</span>(<span class='kw'>model_options</span> <span class='kw'>=</span> <span class='no'>sim_options</span>,
<span class='kw'>param_values</span> <span class='kw'>=</span> <span class='no'>param_values</span>)

}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Patrice Lecharpentier, Remi Vezy, SticsRPacks.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


