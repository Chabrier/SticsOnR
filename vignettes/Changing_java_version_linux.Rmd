---
title: "Changing Java version procedure under linux"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Changing Java version procedure under linux}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Java installation

The lastest JavaStics interface evolution for JavaSTICS-1.5.0 led to use a more recent Java virtual machine (at least version 11) which is not compatible with an older version (i.e. java 8)

For using JavaSTICS-1.41 it is possible to add a Java 8 version and switch to this one when needed.

The next sections are giving information about how to switch to Java 8 and go back to the previously installed version.

These information are partially specific of installation procedures on Debian like distributions and can be easily adapted for other linux OS types.

## Switching the Java version to Java version 8 (for using a JavaSTICS interface 1.41)

After the Java 8 installation, and if it is not the default version known by the system, switching to this version can be done with a script like the following one. It can be ran either from R or a shell terminal.

```{bash, eval = FALSE}
#!/bin/bash

# Changing latest installed Java version to Java version 8
echo "The current Java version is : "
java -version

version=$(java -version 2>&1 | awk -F '"' '/version/ {print $2}')

if ! [ -z $(echo $version | grep ^1.8) ];then
  echo "The Java version is already Java 8"
  exit 0
fi

echo "Changing Java version to Java 8"
if [ -e /usr/lib/jvm/java-8-openjdk-amd64/bin/java ];then
	     sudo rm /usr/bin/java
	     sudo ln -s /usr/lib/jvm/java-8-openjdk-amd64/bin/java /usr/bin/java
fi

version=$(java -version 2>&1 | awk -F '"' '/version/ {print $2}')

if [ -z $(echo $version | grep ^1.8) ];then
  echo
  echo "Java 8 is not installed !"
  exit 1
fi

echo "The Java version is now : "
java -version

```


After that, 

> the **SticsOnR** package functions using the
> JavaSTICS 1.41 command line interface **can be used**.


## Switch back to the previous Java version on the system
For restoring the initial Java version, a script like the following can be ran. 


```{bash, eval = FALSE}
#!/bin/bash

# Changing to the previous installed Java version

echo "Current Java version is : "
java -version

version=$(java -version 2>&1 | awk -F '"' '/version/ {print $2}')

if [ -z $(echo $version | grep ^1.8) ];then
  echo
  echo "The Java version is not Java 8"
  exit 0
fi


last_version=$(/etc/alternatives/java -version 2>&1 | awk -F '"' '/version/ {print $2}')

if ! [ -z $(echo $last_version | grep ^1.8) ];then
  echo
  echo "No more recent version of Java is available on the system !"
  exit 0
fi
  
sudo rm /usr/bin/java
sudo ln -s /etc/alternatives/java /usr/bin/java
echo "JAVA version is now : "
java -version


```
After that, 

> the **SticsOnR** package functions using the
> JavaSTICS 1.5.0 command line interface **can be used**.

